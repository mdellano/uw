<!DOCTYPE html>
<html>
<head>
    <title>UWheel HTML5</title>
    <!-- Kendo -->
    <link href="../styles/kendo.common.min.css" rel="stylesheet">
    <link href="../styles/kendo.default.min.css" rel="stylesheet">
    <script src="../js/jquery.min.js"></script>
    <script src="../js/kendo.web.min.js"></script>
    <!-- Framework specific -->
    <script src="../uwheel/common/Class.js"></script>
    <script src="../uwheel/common/UWheel.js"></script>
    <script src="../uwheel/common/data/Data.js"></script>
    <script src="../uwheel/common/data/TreeData.js"></script>
    <script src="../uwheel/widget/UWWidget.js"></script>
    <script src="../uwheel/widget/layout/UWLayout.js"></script>
    <script src="../uwheel/widget/layout/UWLayoutItem.js"></script>
    <script src="../uwheel/widget/data/UWTree.js"></script>
    <script src="../uwheel/widget/container/UWContainer.js"></script>
    <script src="../uwheel/widget/container/UWWindow.js"></script>
    <script src="../uwheel/widget/container/UWTab.js"></script>
    <script src="../uwheel/widget/container/UWPanel.js"></script>
    <script src="../uwheel/widget/data/UWGrid.js"></script>
    <script src="../uwheel/widget/menu/UWMenu.js"></script>

    <!-- Form specific -->
    <script src="../uwheel/widget/form/rule/UWRules.js"></script>
    <script src="../uwheel/widget/form/UWField.js"></script>
    <script src="../uwheel/widget/form/UWBr.js"></script>
    <script src="../uwheel/widget/form/field/UWTextField.js"></script>
    <script src="../uwheel/widget/form/field/UWDateField.js"></script>
    <script src="../uwheel/widget/form/field/UWNumberField.js"></script>
    <script src="../uwheel/widget/form/field/UWComboField.js"></script>
    <script src="../uwheel/widget/form/field/UWTimeField.js"></script>
    <script src="../uwheel/widget/form/field/UWTextArea.js"></script>
    <script src="../uwheel/widget/form/field/UWSubmit.js"></script>
    <script src="../uwheel/widget/form/UWForm.js"></script>
    <!-- ViewPort -->
    <script src="../uwheel/widget/viewport/UWViewPort.js"></script>

    <!-- Editor specific -->
    <link href="./css/editor.css" rel="stylesheet">

    <script>
        function createForm(_id) {
            UWForm.attachTo('editor', {
                url:'form.json', //Con estas lineas intervengo en el guardado y muestro el div que necesito.
                onSave:function (save) {
                    save.invoke(function (data) {
                        $("#result").show();
                    });

                },
                _id:_id
            });
        }
        var myApp=UWheel.extend({
            ready:function(){
                createForm();
                $("#input").kendoAutoComplete({
                    dataSource: {
                        transport: {
                            read: "/form-load?collection=user&nsql="
                        }
                    },
                    dataTextField: "name",
                    placeholder: "Select user... start typing",
                    select: function(e) {
                        var dataItem = this.dataItem(e.item.index());
                        $("#editor").empty();

                        createForm(dataItem._id);
                    }
                });


            }
        });
        new myApp();
    </script>
</head>
<!-- DOM -->
<body>
<div id="example" class="k-content">
    <label for="input" class="info">Choose users:</label>

    <input id="input" />

    <div class="hint">Search users</div>

    <form id="editor">

    </form>
    <div id="result" style="background: red;display: none">
        Congratulations! Successfull UPDATE!
    </div>
</div>
</form>
</body>
</html>