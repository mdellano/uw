var config=global.uw.config;
function log(text) {
	if (config.hasToLog) console.log('%s | %s',new Date().toISOString(),text);
}


var url=require('util').format('mongodb://%s:%d/%s',config.database.ip,config.database.port,config.database.name);

module.exports=new function() {
	this.open=function(fn) {
		new require('mongodb').Db.connect(url,function(err,db){
			if (!err) {
				log(' <=> Succesfully connected to database => '+db.databaseName);
				fn(db);
			} else {
				log(' <=> Failed to connect to database');
				exit(1);
			}
		});
		
		
	}
}

